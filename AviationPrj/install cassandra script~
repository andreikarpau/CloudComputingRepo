sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer

export JAVA_HOME=/usr/lib/jvm/java-7-oracle
export JRE_HOME=/usr/lib/jvm/java-7-oracle/jre
export PATH=$PATH:/usr/lib/jvm/java-7-oracle/bin:/usr/lib/jvm/java-7-oracle/jre/bin

sudo apt-get install libjna-java -y

echo "deb http://debian.datastax.com/community stable main" | sudo tee -a /etc/apt/sources.list.d/cassandra.sources.list
curl -L https://debian.datastax.com/debian/repo_key | sudo apt-key add -

sudo apt-get update
sudo apt-get install dsc21=2.1.5-1 cassandra=2.1.5 
sudo apt-get install cassandra-tools=2.1.5 ## Optional utilities

----------------

sudo reboot
sudo service cassandra start
sudo service cassandra stop

cqlsh
nodetool status
----------------

cqlsh 172.31.5.89 9042

sudo nano /etc/cassandra/cassandra.yaml


start_native_transport: true
rpc_address: 172.31.5.89
endpoint_snitch: Ec2Snitch
rpc_port: 9160

----------------

sudo ufw enable
sudo ufw allow 9042

----------------

// Quires
CREATE KEYSPACE keyspaceCapstone WITH replication = {  'class': 'SimpleStrategy', 'replication_factor' : '1' };

DESCRIBE keyspaces;


select * from system.schema_columnfamilies where keyspace_name = 'keyspacecapstone';


// 

use keyspaceCapstone;

DROP TABLE keyspaceCapstone.topAirports;
DROP TABLE keyspaceCapstone.perfDays;
DROP TABLE keyspaceCapstone.topfromx;

DROP TABLE keyspaceCapstone.topxy;
DROP TABLE keyspaceCapstone.mean;
DROP TABLE keyspaceCapstone.findflight;

//=================================================

select * FROM keyspaceCapstone.topAirports;
select * FROM keyspaceCapstone.perfDays;
select * FROM keyspaceCapstone.topfromx;

create table keyspaceCapstone.topAirports (Airport text, Popularity text, Id int, Group int, PRIMARY KEY (Group, Id)) WITH CLUSTERING ORDER BY (Id ASC);

create table keyspaceCapstone.perfDays (Day text, Perf text, Id int, Group int, PRIMARY KEY (Group, Id)) WITH CLUSTERING ORDER BY (Id ASC);

create table keyspaceCapstone.topfromx (Origin text, FromAirline text, Perf text, Id int, PRIMARY KEY (Origin, Id)) WITH CLUSTERING ORDER BY (Id ASC);

create table keyspaceCapstone.topxy (Origin text, Dest text, Airline text, Perf text, Id int, PRIMARY KEY (Origin, Id)) WITH CLUSTERING ORDER BY (Id ASC);


CREATE TABLE keyspaceCapstone.mean (fromAir varchar PRIMARY KEY, toAir varchar, mean varchar);

CREATE TABLE keyspaceCapstone.findflight (date1 varchar, fromAir1 varchar PRIMARY KEY, toAir1 varchar, time1 varchar, flightId1 varchar, date2 varchar, fromAir2 varchar, toAir2 varchar, time2 varchar, flightId2 varchar);


COPY topfromx FROM '~/Capstone/Output/TopAirlinesFromX/part-r-00000';
COPY topxy FROM '~/Capstone/Output/TopAirlinesXY/part-r-00000';
COPY mean FROM '~/Capstone/Output/MeanXYDelay/part-r-00000';
COPY findflight FROM '~/Capstone/Output/FindFlight/part-r-00000';




select * FROM keyspaceCapstone.topfromx;
select * FROM keyspaceCapstone.topxy;
select * FROM keyspaceCapstone.mean;
select * FROM keyspaceCapstone.findflight;

//-------------------------------------------------------------
INSERT INTO keyspacecapstone.users ('user1');
INSERT INTO keyspacecapstone.users (user_name) VALUES ('user1');
select * from keyspacecapstone.users


//--------------------------------------------------------------

java -jar connectCassandra-0.0.1-SNAPSHOT-jar-with-dependencies.jar

//////////////////////
INSERT INTO keyspacecapstone.topAirports (airport, popularity, Id) VALUES ('asdasd', 'asfff', 1);



